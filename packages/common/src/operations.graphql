query invoice($id: String!) {
  invoice(id: $id) {
    ... on InvoiceNode {
      id
      comment
      confirmedDatetime
      entryDatetime
      finalisedDatetime
      invoiceNumber

      draftDatetime
      allocatedDatetime
      pickedDatetime
      shippedDatetime
      deliveredDatetime

      hold
      color

      lines {
        ... on InvoiceLineConnector {
          nodes {
            batch
            costPricePerPack
            expiryDate
            id
            itemCode
            itemId
            itemName
            itemUnit
            numberOfPacks
            packSize
            sellPricePerPack
          }
          totalCount
        }
      }
      otherPartyId
      otherPartyName
      pricing {
        ... on InvoicePricingNode {
          __typename
          totalAfterTax
        }
      }
      status
      theirReference
      type
    }
    ... on NodeError {
      __typename
      error {
        description
      }
    }
  }
}

query names {
  names(filter: { isCustomer: true }) {
    ... on NameConnector {
      nodes {
        id
        code
        name
        isSupplier
        isCustomer
      }
      totalCount
    }
  }
}

# query invoices(
#   $first: Int
#   $offset: Int
#   $key: InvoiceSortFieldInput!
#   $desc: Boolean
# ) {
#   invoices(
#     page: { first: $first, offset: $offset }
#     sort: { key: $key, desc: $desc }
#   ) {
#     ... on ConnectorError {
#       __typename
#       error {
#         description
#         ... on DatabaseError {
#           __typename
#           description
#           fullError
#         }
#       }
#     }
#     ... on InvoiceConnector {
#       nodes {
#         id
#         invoiceNumber
#         finalisedDatetime
#         entryDatetime
#         confirmedDatetime
#         comment
#         otherPartyName
#         status
#         theirReference
#         type
#         pricing {
#           ... on NodeError {
#             __typename
#             error {
#               description
#             }
#           }
#           ... on InvoicePricingNode {
#             __typename
#             totalAfterTax
#           }
#         }
#       }
#       totalCount
#     }
#   }
# }

query invoices(
  $first: Int
  $offset: Int
  $key: InvoiceSortFieldInput!
  $desc: Boolean
) {
  invoices(
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
  ) {
    ... on ConnectorError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on PaginationError {
          __typename
          description
          rangeError {
            description
            field
            max
            min
          }
        }
      }
    }
    ... on InvoiceConnector {
      nodes {
        comment

        confirmedDatetime
        entryDatetime

        id
        invoiceNumber

        otherPartyId
        otherPartyName

        status
        color
        theirReference
        type

        pricing {
          ... on NodeError {
            __typename
            error {
              ... on RecordNotFound {
                __typename
                description
              }
              ... on DatabaseError {
                __typename
                description
                fullError
              }
              description
            }
          }
          ... on InvoicePricingNode {
            __typename
            totalAfterTax
          }
        }
      }
      totalCount
    }
  }
}
