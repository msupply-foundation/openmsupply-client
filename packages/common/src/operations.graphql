query invoice($id: String!) {
  invoice(id: $id) {
    __typename
    ... on NodeError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on RecordNotFound {
          __typename
          description
        }
      }
    }
    ... on InvoiceNode {
      __typename
      id
      comment
      entryDatetime
      invoiceNumber

      # allocatedDatetime
      # pickedDatetime
      # shippedDatetime
      # deliveredDatetime
      # enteredByName
      # donorName
      # requisitionNumber
      # purchaseOrderNumber
      # inboundShipmentNumber
      # goodsReceiptNumber
      # color

      onHold

      otherParty {
        __typename
        ... on NameNode {
          __typename
          id
          name
          code
          isCustomer
          isSupplier
        }

        ... on NodeError {
          __typename
          error {
            description
            ... on DatabaseError {
              __typename
              description
              fullError
            }
            ... on RecordNotFound {
              __typename
              description
            }
          }
        }
      }

      lines {
        ... on ConnectorError {
          __typename
          error {
            description
            ... on DatabaseError {
              __typename
              description
              fullError
            }
          }
        }
        ... on InvoiceLineConnector {
          __typename
          nodes {
            __typename
            batch
            costPricePerPack
            expiryDate
            id
            itemCode
            itemId
            itemName
            numberOfPacks
            packSize
            note

            # itemUnit
            locationName
            sellPricePerPack
            stockLine {
              __typename
              ... on NodeError {
                __typename
                error {
                  description
                  ... on DatabaseError {
                    __typename
                    description
                    fullError
                  }
                  ... on RecordNotFound {
                    __typename
                    description
                  }
                }
              }
              ... on StockLineNode {
                __typename
                availableNumberOfPacks
                batch
                costPricePerPack
                expiryDate
                id
                itemId
                packSize
                sellPricePerPack
                storeId
                totalNumberOfPacks
                onHold
                note
              }
            }
          }
          totalCount
        }
      }
      otherPartyId
      otherPartyName
      pricing {
        __typename
        ... on NodeError {
          __typename
          error {
            description
            ... on DatabaseError {
              __typename
              description
              fullError
            }
            ... on RecordNotFound {
              __typename
              description
            }
          }
        }
        ... on InvoicePricingNode {
          __typename
          totalAfterTax
          # subtotal
          # taxPercentage
        }
      }
      status
      theirReference
      type
    }
  }
}

query invoices(
  $first: Int
  $offset: Int
  $key: InvoiceSortFieldInput!
  $desc: Boolean
  $filter: InvoiceFilterInput
) {
  invoices(
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
    filter: $filter
  ) {
    ... on ConnectorError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on PaginationError {
          __typename
          description
          rangeError {
            description
            field
            max
            min
          }
        }
      }
    }
    ... on InvoiceConnector {
      __typename
      nodes {
        comment
        entryDatetime
        id
        invoiceNumber
        otherPartyId
        otherPartyName
        theirReference
        type
        status

        # color

        pricing {
          __typename
          ... on NodeError {
            __typename
            error {
              ... on RecordNotFound {
                __typename
                description
              }
              ... on DatabaseError {
                __typename
                description
                fullError
              }
              description
            }
          }
          ... on InvoicePricingNode {
            __typename
            totalAfterTax
            # subtotal
            # taxPercentage
          }
        }
      }
      totalCount
    }
  }
}

query names(
  $key: NameSortFieldInput!
  $desc: Boolean
  $first: Int
  $offset: Int
  $filter: NameFilterInput
) {
  names(
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
    filter: $filter
  ) {
    ... on ConnectorError {
      __typename
      error {
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        description
        ... on PaginationError {
          __typename
          description
          rangeError {
            description
            field
            max
            min
          }
        }
      }
    }
    ... on NameConnector {
      __typename
      nodes {
        code
        id
        isCustomer
        isSupplier
        name
      }
      totalCount
    }
  }
}

query itemsWithStockLines(
  $first: Int
  $offset: Int
  $key: ItemSortFieldInput!
  $desc: Boolean
  $filter: ItemFilterInput
) {
  items(
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
    filter: $filter
  ) {
    ... on ConnectorError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on PaginationError {
          __typename
          description
          rangeError {
            description
            field
            max
            min
          }
        }
      }
    }
    ... on ItemConnector {
      __typename
      nodes {
        __typename
        # availableQuantity

        availableBatches {
          __typename
          ... on ConnectorError {
            __typename
            error {
              description
              ... on DatabaseError {
                __typename
                description
                fullError
              }
              ... on PaginationError {
                __typename
                description
                rangeError {
                  description
                  field
                  max
                  min
                }
              }
            }
          }
          ... on StockLineConnector {
            __typename
            nodes {
              __typename
              availableNumberOfPacks
              batch
              costPricePerPack
              expiryDate
              id
              itemId
              packSize
              sellPricePerPack
              storeId
              totalNumberOfPacks
              onHold
              note
            }
            totalCount
          }
        }
        code
        id
        isVisible
        name
        unitName
      }
      totalCount
    }
  }
}

query itemsListView(
  $first: Int
  $offset: Int
  $key: ItemSortFieldInput!
  $desc: Boolean
  $filter: ItemFilterInput
) {
  items(
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
    filter: $filter
  ) {
    ... on ConnectorError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on PaginationError {
          __typename
          description
          rangeError {
            description
            field
            max
            min
          }
        }
      }
    }
    ... on ItemConnector {
      __typename
      nodes {
        __typename
        # availableQuantity
        code
        id
        isVisible
        name
        unitName
      }
      totalCount
    }
  }
}

mutation insertOutboundShipment($id: String!, $otherPartyId: String!) {
  insertOutboundShipment(input: { id: $id, otherPartyId: $otherPartyId }) {
    __typename
    ... on InvoiceNode {
      id
    }
    ... on InsertOutboundShipmentError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on ForeignKeyError {
          __typename
          description
          key
        }
        ... on OtherPartyCannotBeThisStoreError {
          __typename
          description
        }
        ... on OtherPartyNotACustomerError {
          __typename
          description
          otherParty {
            code
            id
            isCustomer
            isSupplier
            name
          }
        }
        ... on RecordAlreadyExist {
          __typename
          description
        }
      }
    }
    ... on NodeError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on RecordNotFound {
          __typename
          description
        }
      }
    }
  }
}

mutation updateOutboundShipment($input: UpdateOutboundShipmentInput!) {
  updateOutboundShipment(input: $input) {
    ... on InvoiceNode {
      __typename
      id
    }
    ... on NodeError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on RecordNotFound {
          __typename
          description
        }
      }
    }
    ... on UpdateOutboundShipmentError {
      __typename
      error {
        description
      }
    }
  }
}

mutation deleteOutboundShipments($ids: [String!]) {
  batchOutboundShipment(deleteOutboundShipments: $ids) {
    __typename
    deleteOutboundShipments {
      __typename
      id
    }
  }
}

query invoiceCounts($type: InvoiceNodeType!) {
  invoiceCounts(type: $type) {
    ... on InvoiceCountsConnector {
      __typename
      created {
        today
        thisWeek
      }
      toBePicked
    }
    ... on ConnectorError {
      __typename
      error {
        description
      }
    }
  }
}

query stockCounts {
  stockCounts {
    ... on StockCountsConnector {
      __typename
      expired
      expiringSoon
    }
    ... on ConnectorError {
      __typename
      error {
        description
      }
    }
  }
}

mutation upsertOutboundShipment(
  $deleteOutboundShipmentLines: [DeleteOutboundShipmentLineInput!]
  $insertOutboundShipmentLines: [InsertOutboundShipmentLineInput!]
  $updateOutboundShipmentLines: [UpdateOutboundShipmentLineInput!]
  $updateOutboundShipments: [UpdateOutboundShipmentInput!]
) {
  batchOutboundShipment(
    deleteOutboundShipmentLines: $deleteOutboundShipmentLines
    insertOutboundShipmentLines: $insertOutboundShipmentLines
    updateOutboundShipmentLines: $updateOutboundShipmentLines
    updateOutboundShipments: $updateOutboundShipments
  ) {
    __typename
    insertOutboundShipmentLines {
      __typename
      id
    }
    updateOutboundShipments {
      __typename
      id
    }
    deleteOutboundShipmentLines {
      __typename
      id
    }
  }
}

mutation upsertInboundShipment(
  $deleteInboundShipmentLines: [DeleteInboundShipmentLineInput!]
  $insertInboundShipmentLines: [InsertInboundShipmentLineInput!]
  $updateInboundShipmentLines: [UpdateInboundShipmentLineInput!]
  $updateInboundShipments: [UpdateInboundShipmentInput!]
) {
  batchInboundShipment(
    deleteInboundShipmentLines: $deleteInboundShipmentLines
    insertInboundShipmentLines: $insertInboundShipmentLines
    updateInboundShipmentLines: $updateInboundShipmentLines
    updateInboundShipments: $updateInboundShipments
  ) {
    __typename
    updateInboundShipments {
      __typename
      id
    }

    insertInboundShipmentLines {
      __typename
      id
    }

    deleteInboundShipmentLines {
      __typename
      id
    }

    updateInboundShipmentLines {
      __typename
      id
    }
  }
}

mutation updateInboundShipment($input: UpdateInboundShipmentInput!) {
  updateInboundShipment(input: $input) {
    ... on InvoiceNode {
      __typename
      id
    }
    ... on NodeError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on RecordNotFound {
          __typename
          description
        }
      }
    }
    ... on UpdateInboundShipmentError {
      __typename
      error {
        description
      }
    }
  }
}

mutation deleteInboundShipments($ids: [DeleteInboundShipmentInput!]) {
  batchInboundShipment(deleteInboundShipments: $ids) {
    __typename
    deleteInboundShipments {
      __typename
      id
    }
  }
}

mutation insertInboundShipment($id: String!, $otherPartyId: String!) {
  insertInboundShipment(
    input: { id: $id, status: DRAFT, otherPartyId: $otherPartyId }
  ) {
    __typename
    ... on InvoiceNode {
      id
    }
    ... on InsertInboundShipmentError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on ForeignKeyError {
          __typename
          description
          key
        }

        ... on OtherPartyNotASupplier {
          __typename
          description
          otherParty {
            code
            id
            isCustomer
            isSupplier
            name
          }
        }
        ... on RecordAlreadyExist {
          __typename
          description
        }
      }
    }
    ... on NodeError {
      __typename
      error {
        description
        ... on DatabaseError {
          __typename
          description
          fullError
        }
        ... on RecordNotFound {
          __typename
          description
        }
      }
    }
  }
}
