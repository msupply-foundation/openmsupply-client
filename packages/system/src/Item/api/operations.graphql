fragment ItemRow on ItemNode {
  __typename
  id
  code
  name
  unitName
}

fragment Item on ItemNode {
  __typename
  code
  id
  isVisible
  name
  unitName
  availableBatches(storeId: $storeId) {
    __typename
    totalCount
    nodes {
      __typename
      availableNumberOfPacks
      batch
      costPricePerPack
      expiryDate
      id
      itemId
      packSize
      sellPricePerPack
      totalNumberOfPacks
      onHold
      note
      storeId
      locationName
    }
  }
  stats(storeId: $storeId) {
    __typename
    averageMonthlyConsumption
    availableStockOnHand
    availableMonthsOfStockOnHand
  }
}

query itemsWithStockLines(
  $first: Int
  $offset: Int
  $key: ItemSortFieldInput!
  $desc: Boolean
  $filter: ItemFilterInput
  $storeId: String!
) {
  items(
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
    filter: $filter
    storeId: $storeId
  ) {
    ... on ItemConnector {
      __typename
      nodes {
        ...Item
      }
      totalCount
    }
  }
}

query itemsListView(
  $first: Int
  $offset: Int
  $key: ItemSortFieldInput!
  $desc: Boolean
  $filter: ItemFilterInput
  $storeId: String!
) {
  items(
    storeId: $storeId
    page: { first: $first, offset: $offset }
    sort: { key: $key, desc: $desc }
    filter: $filter
  ) {
    ... on ItemConnector {
      __typename
      nodes {
        ...ItemRow
      }
      totalCount
    }
  }
}
